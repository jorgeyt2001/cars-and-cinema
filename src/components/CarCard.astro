---
interface Props {
  name: string;
  brand: string;
  price: number;
  image: string;
  specs: {
    power: string;
    speed: string;
    acceleration: string;
  };
  featured?: boolean;
}

const { name, brand, price, image, specs, featured = false } = Astro.props;
---

<div class={`car-card glass-enhanced rounded-2xl overflow-hidden transition-smooth group tilt-3d scanner pulse-ring transform-3d-extreme energy-shield neon-lines hexagon-bg ${featured ? 'gradient-border-animated holographic-border' : ''}`}>
  <div class="relative overflow-hidden h-52 sm:h-56 md:h-64">
    <img
      src={image}
      alt={`${brand} ${name}`}
      class="w-full h-full object-cover group-hover:scale-110 transition-all duration-700 group-hover:rotate-2"
    />
    <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent group-hover:from-black/70 transition-all duration-500"></div>

    {featured && (
      <div class="absolute top-3 right-3 sm:top-4 sm:right-4 px-3 sm:px-4 py-1.5 sm:py-2 bg-[#d4af37] text-black font-bold text-[10px] sm:text-xs rounded-full animate-pulse">
        DESTACADO
      </div>
    )}

    <div class="absolute bottom-3 sm:bottom-4 left-3 sm:left-4 right-3 sm:right-4 transform group-hover:scale-105 transition-transform duration-300">
      <h3 class="text-xl sm:text-2xl font-bold text-white mb-1" style="font-family: var(--font-heading);">{name}</h3>
      <p class="text-[#d4af37] font-semibold text-sm sm:text-base">{brand}</p>
    </div>

    <!-- Hover overlay with quick view -->
    <div class="absolute inset-0 bg-black/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center">
      <div class="text-center transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
        <svg class="w-12 h-12 sm:w-16 sm:h-16 text-[#d4af37] mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
        </svg>
        <p class="text-white font-semibold text-sm">Vista Rápida</p>
      </div>
    </div>
  </div>

  <div class="p-4 sm:p-5 md:p-6">
    <div class="grid grid-cols-3 gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-5 md:mb-6">
      <div class="text-center p-2 glass rounded-lg hover:bg-[#d4af37]/10 transition-colors duration-300">
        <div class="text-[#d4af37] text-sm sm:text-base font-bold mb-0.5 sm:mb-1">{specs.power}</div>
        <div class="text-white/60 text-[10px] sm:text-xs">CV</div>
      </div>
      <div class="text-center p-2 glass rounded-lg hover:bg-[#d4af37]/10 transition-colors duration-300">
        <div class="text-[#d4af37] text-sm sm:text-base font-bold mb-0.5 sm:mb-1">{specs.speed}</div>
        <div class="text-white/60 text-[10px] sm:text-xs">km/h</div>
      </div>
      <div class="text-center p-2 glass rounded-lg hover:bg-[#d4af37]/10 transition-colors duration-300">
        <div class="text-[#d4af37] text-sm sm:text-base font-bold mb-0.5 sm:mb-1">{specs.acceleration}</div>
        <div class="text-white/60 text-[10px] sm:text-xs">0-100</div>
      </div>
    </div>

    <div class="flex items-center justify-between mb-3 sm:mb-4">
      <div>
        <div class="text-white/60 text-xs sm:text-sm">Desde</div>
        <div class="text-2xl sm:text-3xl font-bold text-white" style="font-family: var(--font-heading);">
          €{price}<span class="text-xs sm:text-sm text-white/60 font-normal">/día</span>
        </div>
      </div>
      <button class="p-2 sm:p-3 glass rounded-lg hover:bg-[#d4af37] hover:text-black transition-all duration-300 group/heart">
        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path class="group-hover/heart:fill-current" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
        </svg>
      </button>
    </div>

    <button
      class="w-full px-4 sm:px-6 py-3 sm:py-4 bg-[#d4af37] text-black font-bold rounded-lg hover:bg-white transition-all duration-300 group-hover:shadow-xl group-hover:shadow-[#d4af37]/50 hover:scale-105 text-sm sm:text-base magnetic-button ripple elastic-bounce relative overflow-hidden"
    >
      <span class="relative z-10">RESERVAR AHORA</span>
    </button>
  </div>
</div>

<style>
  .car-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .car-card:hover {
    transform: translateY(-10px) rotateX(2deg);
    box-shadow: 0 25px 50px rgba(212, 175, 55, 0.4);
  }
</style>

<script>
  // 3D Tilt Effect on hover
  document.addEventListener('DOMContentLoaded', () => {
    const cards = document.querySelectorAll('.car-card');

    cards.forEach(card => {
      card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        const rotateX = ((y - centerY) / centerY) * -10;
        const rotateY = ((x - centerX) / centerX) * 10;

        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-10px) scale3d(1.02, 1.02, 1.02)`;
      });

      card.addEventListener('mouseleave', () => {
        card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateY(0) scale3d(1, 1, 1)';
      });
    });
  });
</script>
